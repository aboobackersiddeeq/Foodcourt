 


<%- include('../partials/admin-link.ejs') %>
<!-- <style>
    .dataTables_wrapper label {
    /* font-size: .8125rem; */
    margin-right: 455px;
    margin-top: -13px;
    margin-bottom: 31px;
}
</style> -->
<style>
    label {
        display: flex;
        align-items: center;
        /* margin-right: 118px; */
        border-radius: 0%;

    }

    /* .add{
        z-index: 0;
    margin-top: -100px;
    margin-left: 500px;
    padding: 15px;
    border-radius: 1px;
    } */
    #cat_filter {

        align-items: center;
    }

    input {
        width: 269px;
        height: 46px;
    }

    #cat {
        /* background-color: rgb(246, 246, 246); */
        margin-top: 20px;
        margin-bottom: 10px;
    }

    #cat_paginate {
        max-height: 40px;
        margin: 10px 10px;
        <%if(category){%>
         <%if(category.length<10){%>
         display: none;
        <%}%>
         <%}%>
    }

    #cat_info {
        color: black;
    }

    #cat_previous {
        background-color: lightskyblue !important;
        border-radius: 20px;

        color: blue !important;

    }

    .fg-button {
        color: black;
    }

    #cat_next {
        background-color: lightskyblue !important;
        border-radius: 20px;

        color: blue !important;
    }
</style>

<body>
    <div class="container-scroller">
        <!-- partial:../../partials/_navbar.html -->
        <%- include('../partials/_navbar.ejs') %>
            <!-- partial -->
            <div class="container-fluid page-body-wrapper">
                <!-- partial:../../partials/_settings-panel.html -->
                <%- include('../partials/_settings-panel.ejs') %>
                    <!-- partial -->
                    <!-- partial:../../partials/_sidebar.html -->
                    <%- include('../partials/_sidebar.ejs') %>
                        <!-- partial -->
                        <div class="main-panel">
                            <div class="content-wrapper">
                                <div class="row">
                                    <div class="col-lg-12 grid-margin stretch-card">
                                        <div class="card" style="border-radius: 0%;">
                                            <div class="card-body" style="border-radius: 0%;">
                                                <div class="container" id="">

                                                    <!-- <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="@mdo">Edit Product</button>
                                                     -->

                                                    <div class="row" style="overflow-x:auto;">
                                                        <table id="cat" class="table  table-striped">
                                                            <thead style="    background-color: #121211;
                                                            color: white;">
                                                                <tr>
                                                                    <th class="col-md-1">NO</th>
                                                                    <th class="col-md-3">NAME</th>
                                                                    <th class="col-md-3">EMAIL</th>
                                                                    <th class="col-md-2">IMAGE</th>
                                                                    <th class="col-md-3">OPTIONS</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <%if(category){%>
                                                                <% category.forEach(function(category,index){%>
                                                                    <tr id="<%=category._id%>">
                                                                        <td>
                                                                            <%=index+1%>
                                                                        </td>
                                                                        <td>
                                                                            <%= category.name%>
                                                                        </td>
                                                                        <td>
                                                                            <%= category.description%>
                                                                        </td>
                                                                        <td>
                                                                            <img src="<%= category.image%>" alt="">
                                                                        </td>
                                                                        <td>
                                                                            <a
                                                                                href="/admin/edit-cat?id=<%=category._id %>"><i
                                                                                    class="fa fa-edit"
                                                                                    style="font-size:24px"></i></a>
                                                                            <!-- href="/admin/delete-category?id=<%=category._id %>&name=abu" -->
                                                                            <a
                                                                                onclick="deleted('<%=category._id%>')"><i
                                                                                    class="material-icons"
                                                                                    style="font-size:24px;color:red">Delete</i></a>

                                                                        </td>
                                                                        <%});%>
                                                                        <%}%>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                    <div class="my-4">
                                                        <!-- <a href="/admin/add-category "
                                                            class="btn btn-primary ml-auto">Add Category</a> -->
                                                        <!-- <button type="button" class="btn btn-primary add"
                                                            data-bs-toggle="modal" data-bs-target="#exampleModal"
                                                            data-bs-whatever="@mdo">Add category</button> -->

                                                    </div>
                                                </div>

                                            </div>
                                        </div>

                                    </div>
                                    <div>

                                    </div>


                                </div>
                                <!-- content-wrapper ends -->
                                <!-- partial:../../partials/_footer.html -->
                                <%- include('../partials/_footer.ejs') %>
                                    <!-- partial -->
                            </div>
                            <!-- main-panel ends -->
                        </div>
                        <!-- page-body-wrapper ends -->
            </div>
            <%- include('../partials/admin-script.ejs') %>
</body>

<script>
    $(document).ready(function () {
        $('#cat').DataTable();
    });


</script>

</html>
<!-- modal add address -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-body">
                <form action="/admin/add-category" method="post" enctype="multipart/form-data">
                    <!-- Name input -->
                    <div class="form-outline mb-4">

                        <input type="text" name="categoryName" id="form4Example1" class="form-control" required />
                        <label class="form-label" for="form4Example1">Name</label>
                    </div>

                    <!-- Email input -->


                    <!-- Message input -->
                    <div class="form-outline mb-4">
                        <textarea name="description" class="form-control" id="form4Example3" rows="4"
                            required></textarea>
                        <label class="form-label" for="form4Example3">Description</label>
                    </div>

                    <div class="form-outline mb-4">
                        <input type="file" name="img" id="image" class="form-control" />
                        <label class="form-label" for="form4Example1">Image</label>
                    </div>

                    <!-- Submit button -->
                    <button type="submit" class="btn btn-primary btn-block mb-4">Add Category</button>
                </form>


            </div>

        </div>
    </div>
</div>
</section>

<script>
    function deleted(categoryId) {
        Swal.fire({
            title: 'Are you sure?',
            text: "You won't be able to revert this!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes, delete it!'
        }).then((result) => {
            if (result.isConfirmed) {
                $.ajax({
                    url: '/admin/delete-category',
                    data: {
                        id: categoryId,

                    },
                    method: "get",
                    success: (response) => {
                        if (response.status) {
                            document.getElementById(categoryId).remove()
                            Swal.fire(
                                'Deleted!',
                                'Your file has been deleted.',
                                'success'
                            )

                            console.log(response);

                            
                        }
                    }
                })

            }
        })

    }
</script>
            <!-- <script src="../../js/off-canvas.js"></script> -->
            <!-- <script src="../../js/hoverable-collapse.js"></script> -->
            <script src="../../js/template.js"></script>
            <!-- <script src="../../js/settings.js"></script> -->
            <!-- <script src="../../js/todolist.js"></script> -->